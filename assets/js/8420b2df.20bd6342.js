"use strict";(self.webpackChunkazalea=self.webpackChunkazalea||[]).push([[9707],{5477:(e,a,t)=>{t.r(a),t.d(a,{default:()=>r});var s=t(781),n=t(6540),l=t(1250),c=t(1552),d=t.n(c),i=t(4848);function r(){let[e,a]=(0,n.useState)([]),[t,c]=(0,n.useState)({}),[r,o]=(0,n.useState)(!1),[p,m]=(0,n.useState)("Download");return(0,n.useEffect)((()=>{!async function(){let e=await l.A.get("https://azalea-api.trashdev.org/api/get-modules",{headers:{origin:"https://azalea-api.trashdev.org"}}),t={};for(const a of e.data)t[a.namespace]=!0;c(t),a(e.data)}()}),[]),(0,i.jsx)(s.A,{children:(0,i.jsxs)("div",{style:{display:"flex",height:"fit-content",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"10px"},children:[(0,i.jsxs)("h1",{children:["Azalea Downloader ",(0,i.jsx)("span",{class:"badge badge--primary",children:"BETA"})]}),(0,i.jsx)("div",{className:"cards",children:e.map((e=>{let a=new(d().Converter);return(0,i.jsxs)("div",{className:"card","data-activated":1==t[e.namespace]?"true":"false",onClick:()=>{let a=JSON.parse(JSON.stringify(t));a[e.namespace]=1!=a[e.namespace],c(a)},children:[(0,i.jsxs)("div",{className:"title",children:[(0,i.jsx)("img",{src:e.icon,alt:""}),e.namespace,t[e.namespace]?(0,i.jsx)("span",{class:"badge badge--primary",children:"SELECTED"}):(0,i.jsx)("span",{class:"badge badge--secondary",children:"NOT SELECTED"})]}),(0,i.jsx)("div",{className:"description",dangerouslySetInnerHTML:{__html:a.makeHtml(e.description).substring(3).slice(0,-4)}})]})}))}),(0,i.jsx)("button",{class:"button button--primary",style:{width:"90%"},disabled:r,onClick:()=>{let e=new WebSocket("wss://azalea-api.trashdev.org");m("Setting up websocket connection"),o(!0),e.onopen=()=>{e.onmessage=e=>{console.log(e.data);let a=JSON.parse(e.data);2==a.type?m(a.data):1==a.type&&(m("Download"),o(!1),function(e,a){const t=`data:application/zip;base64,${e}`,s=document.createElement("a");document.body.appendChild(s),s.href=t,s.target="_self",s.download=a,s.click()}(a.data,"Custom Azalea.mcaddon"))};let a=JSON.parse(JSON.stringify(t)),s=[];for(const e in a)a[e]&&s.push(e);e.send(JSON.stringify({command:"create-download",modules:s}))}},children:p})]})})}}}]);